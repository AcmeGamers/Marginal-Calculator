<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marginal Calculator</title>
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="components/tabs.css" />
  </head>
  <body>
    <div id="tabs">
      <h2>Calculator</h2>

      <div class="tab">
        <button
          class="tablinks"
          onclick="openTab(event, 'Marginal_Revenue_Tab')"
        >
          Marginal Revenue
        </button>
        <button class="tablinks" onclick="openTab(event, 'PED')">
          Price Elasticity of Demand (PED)
        </button>
        <button class="tablinks" onclick="openTab(event, 'YED')">
          Income Elasticity of Demand (YED)
        </button>
        <button class="tablinks" onclick="openTab(event, 'XED')">
          Cross Price Elasticity of Demand (XED)
        </button>
        <button class="tablinks" onclick="openTab(event, 'PC')">
          Percentage Change
        </button>
      </div>

      <!-- Marginal Revenue (MR) -->
      <div id="Marginal_Revenue_Tab" class="tabcontent">
        <div class="text_and_input">
          <p class="margin-right-1rem">Expression</p>
          <input
            type="text"
            value="49 + 8*q + 6*Q^2"
            placeholder="49 + 8*q + 6*Q^2"
            id="expression"
          />
        </div>

        <!-- 55 + 6*q - 7*q^2 + 3*q^3 === Q = 4 === 94 -->
        <div class="text_and_input">
          <p class="margin-right-1rem">Value of Q:</p>
          <input type="text" value="9" placeholder="Value of Q" id="q_value" />
        </div>

        <input
          value="Calculate!"
          style="margin-top: 6px"
          type="button"
          onclick="MRCheck()"
        />

        <div id="mr1" class="left-align">
          <h2 id="derivation_h2"></h2>
          <p id="derivative_step1" class="hide"></p>
          <p id="derivative_step1_2" class="no-margin"></p>
          <p id="derivative_step2" class="hide"></p>
          <p id="derivative_step2_2" class="no-margin"></p>
        </div>

        <div id="mr2" class="left-align">
          <h2 id="puttingValues_h2"></h2>
          <p id="puttingValues_step1" class="hide"></p>
          <p id="puttingValues_step1_1" class="no-margin"></p>
          <p id="puttingValues_step1_2" class="no-margin"></p>
          <p id="puttingValues_step2" class="hide"></p>
          <p id="puttingValues_step2_1" class="no-margin"></p>
          <span id="result"></span>
        </div>

        <div id="mr3" class="left-align">
          <h2 id="Marginal_Conclusion_1"></h2>
          <span id="Marginal_Conclusion_2"></span>
        </div>
      </div>

      <!-- Price Elasticity of Demand (PED) -->
      <div id="PED" class="tabcontent">
        <div>
          <h3>Price Elasticity of Demand (PED)</h3>

          <!-- Need of Values -->
          <div id="checkPEDRequirements">
            <span> Do you need to take out: </span>

            <label>
              <input type="checkbox" value="1" id="ped_1_1" name="status" />
              YED
            </label>
            <label>
              <input type="checkbox" value="1" id="ped_1_2" name="status" />
              XED
            </label>
            <label>
              <input type="checkbox" value="1" id="ped_1_3" name="status" />
              Percentage Change
            </label>
          </div>
          <!-- HTML Selector: 1, 2, 3 -->
          <div id="observe_ped_change">
            <span>Price Goods Limit:</span>

            <label>
              <input type="radio" value="1" id="ped_1" name="status" />
              1
            </label>

            <label>
              <input type="radio" value="2" id="ped_2" name="status" />
              2
            </label>
            <label>
              <input type="radio" value="3" id="ped_3" name="status" />
              3
            </label>
          </div>
          <div>
            <!-- PED Expression -->
            <span>Expression </span>
            <input
              type="text"
              style="width: 50vw"
              value="700-2*p+0.02*y"
              placeholder="1456 - P1 + 0.75 * P2 - 0.5 * p3 + 0.05*Y"
              id="ped_expression"
            />
          </div>
          <!-- 700-2*p+0.02*y -->
          <!-- 5000 -->
          <!-- One P Value Holder-->

          <!-- Two P Value Holder-->

          <!-- Three P Value Holder-->
          <!-- 7777 - P1 + 0.75 * P2 - 0.5*p3 + 0.05*y -->
          <!-- 18361 -->
          <!-- "1456 - P1 + 0.75 * P2 - 0.5 * p3 + 0.05*Y" -->
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: flex-start;
            "
          >
            <!-- PED Goods Result -->
            <div id="PED_goods" style="display: block; margin: 1rem 0">
              <span id="ped_result"></span>
            </div>
            <div
              style="display: flex; flex-direction: row; align-items: baseline"
            >
              <!-- PED Income (Y) -->
              <p class="margin-right-1rem" style="margin-top: 0">Income (Y)</p>
              <input
                id="ped_income"
                value="18361"
                type="text"
                placeholder="Income"
              />
            </div>
            <!-- PED Calculate -->
            <input
              style="margin: 1rem 0"
              value="Calculate!"
              type="button"
              onclick="PEDCheck()"
            />
          </div>

          <!-- PED Answer Display -->
          <div id="ped1" class="left-align">
            <h2 id="calculate_h2"></h2>
            <p id="calculate_step1" class="hide"></p>
            <p id="calculate_step1_2" class="no-margin"></p>
            <p id="calculate_step1_3" class="no-margin"></p>
            <p id="calculate_step1_4" class="no-margin"></p>
          </div>
        </div>
      </div>

      <div id="YED" class="tabcontent">
        <h3>YED</h3>
        <p>YED will be arriving soon from rest.</p>
      </div>

      <div id="XED" class="tabcontent">
        <h3>XED</h3>
        <p>
          XED will be arriving soon from a lonnnnnng breakfast (that is until
          the dev ends making this one).
        </p>
      </div>

      <div id="PC" class="tabcontent">
        <h3>Estimate the Percentage Change</h3>
        <p>
          PC, hmmm, who wants to go the PC hotel for a chess competetion and
          meal?.
        </p>
      </div>
    </div>
    <footer>
      <div>
        <p>
          A github repository created by
          <a href="https://github.com/AcmeGamers">Acme Gamers</a>
        </p>
      </div>
    </footer>
  </body>

  <!-- Nerdamer -->

  <script src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.12/nerdamer.core.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.12/Algebra.js"
    integrity="sha256-oJEHFFp8pDXx0Myx6cc7RVmh3a2kZPEGOP+bAunJptU="
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.12/Calculus.js"
    integrity="sha256-1X0hl2yReR/yZuZo7R3A9LUgS9+zWl8GzYjuk4pd6bE="
    crossorigin="anonymous"
  ></script>

  <!-- Math JS -->
  <script src="https://cdn.jsdelivr.net/npm/mathjs@10.0.0/lib/browser/math.min.js"></script>

  <!-- Katex -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"
    integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs"
    crossorigin="anonymous"
  />

  <!-- The loading of KaTeX is deferred to speed up page rendering -->
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"
    integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx"
    crossorigin="anonymous"
  ></script>

  <!-- To automatically render math in text elements, include the auto-render extension: -->
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js"
    integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"
    crossorigin="anonymous"
    onload="renderMathInElement(document.body);"
  ></script>

  <!-- My Scripts -->
  <script src="altogether.js"></script>
  <script>
    function openTab(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
    }
  </script>

  <!-- Custom Functions / Scripts  -->
  <script>
    // Add Custom Style Property
    function hideToShow(name, value, repeat) {
      try {
        if (repeat > 0) {
          for (var data = 1; data <= repeat; data++) {
            document.getElementById(name + data).style.display = value;
          }
          console.log("Complete");
        } else {
          log(
            `The repeat is given less than 1, current value of repeat: ${repeat}`
          );
        }
      } catch (error) {
        console.log(`There is some error in the user input`);
      }
    }

    // Marginal Revenue Function
    function MRCheck() {
      hideToShow("mr", "flex", 3);

      // Obtaining Input Value
      var expression = document
        .getElementById("expression")
        .value.toLowerCase()
        .replace(/q/g, "x"); // This line replaces any `x` variable with `q`

      // Logs The Result
      console.log(expression);
      var q_value = document.getElementById("q_value").value; // Gets Value of Q

      // Latex Function
      function LatexValue(id, nerdamerExpression, TheElement, data) {
        // Renders data
        document.getElementById(id).innerHTML = katex.render(
          data +
            `=  ${nerdamer.expressions(true, "LaTeX")[nerdamerExpression]}`,
          document.getElementById(TheElement),
          {
            displayMode: true,
            macros: {
              "\\RR": "\\mathbb{R}",
            },
          }
        );
      }

      // Latex Function Without Nerdamer
      function LatexValue_WithoutNerdamer(
        id,
        expressionValue,
        TheElement,
        data
      ) {
        document.getElementById(id).innerHTML = katex.render(
          data + `=  ${expressionValue}`,
          document.getElementById(TheElement),
          {
            displayMode: true,
            macros: {
              "\\RR": "\\mathbb{R}",
            },
          }
        );
      }

      // Each Value Checker
      function valueCheck(dataExpression) {
        // Split using a space character
        let arr = dataExpression.split(" ");

        // Making the Array
        var value1 = [];
        for (let index = 0; index < arr.length; index++) {
          value1 += `${arr[index]} `;
        }

        // Result
        var finalAnswer = eval(math.evaluate(value1));
        console.log(value1);
        console.log(finalAnswer);

        answers = {
          derivative: deriveExpression(expressionValue),
          puttingValues: value1,
          answer: finalAnswer,
        };
        return answers;
      }

      // Marginal Revenue Calculation
      function MarginalRevenue(expression, Q) {
        // Obtaining the Expression from first Function
        var expressionValue = expression,
          deviationResult = deriveExpression(expressionValue),
          result = deviationResult.replace(/x/g, Q);
        console.log(deviationResult);

        // Split using a space character
        let arr = result.split(" ");

        // Making the Array
        var value1 = [];
        for (let index = 0; index < arr.length; index++) {
          value1 += `${arr[index]} `;
        }

        // Result
        var finalAnswer = eval(math.evaluate(value1));
        console.log(value1);
        console.log(finalAnswer);

        // Providing the answers to variables which needs it.
        answers = {
          derivative: deriveExpression(expressionValue),
          puttingValues: value1,
          answer: finalAnswer,
        };
        console.log("-------------------");
        return answers;
      }

      // Marginal Revenue Function Calculation 2
      function MarginalRevenueDisplay() {
        var result = MarginalRevenue(expression, q_value);

        // Derivation
        document.getElementById("derivation_h2").innerHTML =
          "Step 1: Derivation";

        var element = "derivative_step1_2";
        var firstNearDream = nerdamer(`d/dQ(${expression.replace(/x/g, "Q")})`);
        LatexValue("derivative_step1", "1", element, "MC ");

        element = "derivative_step2_2";
        var secondNearDream = nerdamer(
          `${result.derivative.replace(/x/g, "Q")}`
        );
        LatexValue("derivative_step2", "2", element, "MC ");

        // Putting Values
        document.getElementById("puttingValues_h2").innerHTML =
          "Step 2: Putting Values";

        // puttingValues_step1_2
        element = "puttingValues_step1_1";
        var thirdNearDream = nerdamer(`${q_value}`);
        LatexValue("puttingValues_step1", "3", element, "Value of Q");

        // puttingValues_step1_1
        element = "puttingValues_step1_2";
        var secondNearDream = nerdamer(`${result.derivative}`);
        LatexValue("puttingValues_step1", "2", element, "MC ");

        // puttingValues_step2_1
        element = "puttingValues_step2_1";
        LatexValue_WithoutNerdamer(
          "puttingValues_step2",
          result.puttingValues,
          element,
          `MC `
        );

        // Results
        document.getElementById("result").innerHTML = `MC = ${result.answer}`;

        // Conclusion
        document.getElementById("Marginal_Conclusion_1").innerHTML =
          "Conclusion";
        document.getElementById(
          "Marginal_Conclusion_2"
        ).innerHTML = `Hence the revenue of ${q_value} units is $${result.answer}`;

        nerdamer.flush();
      }
      // Function that displays values on HTML page
      try {
        MarginalRevenueDisplay();
      } catch (error) {
        document.getElementById("result").innerHTML =
          "There is some issue in the formula or the typed data is invalid";
        console.log(error);
      }
    }
  </script>
  <!-- Script for PED -->

  <!-- Script to change Price good limits -->
  <script>
    var result = document.querySelector("#ped_result");
    document
      .querySelector("#observe_ped_change")
      .addEventListener("change", function (e) {
        var target = e.target;
        var data;
        switch (target.value) {
          case "1":
            data = `<div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 1 (P)</p><input id="pg1"value="25"type="text"placeholder="Price of Good 1"/></div>`;
            break;
          case "2":
            data = `<div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 1 (P1)</p><input id="pg1"value="209"type="text"placeholder="Price of Good 1"/></div><div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 2 (P2)</p><input id="pg2"value="101"type="text"placeholder="Price of Good 2"/></div>`;
            break;
          case "3":
            data = `<div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 1 (P1)</p><input id="pg1"value="209"type="text"placeholder="Price of Good 1"/></div><div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 2 (P2)</p><input id="pg2"value="101"type="text"placeholder="Price of Good 2"/></div><div class="text_and_input"><p class="margin-right-1rem">Pay of Goods 3 (P3)</p><input id="pg3"value="478"type="text"placeholder="Price of Good 3"/></div>`;
            break;
        }
        console.log(e.target.defaultValue);
        select_value = e.target.defaultValue;
        result.innerHTML = data;
      });
  </script>

  <!-- PED, YED, XED Calculator -->
  <script>
    //////////////////////////////
    // Price Elasticity of Demand
    //////////////////////////////
    // Variable Replacer
    function variableReplacer(
      expression,
      valueToChange,
      value1,
      valueToChange2,
      value2,
      valueToChange3,
      value3
    ) {
      var result;

      if (value2) {
        // First Value will be your new value, second is the value currently
        result = expression.split(valueToChange).join(value1);
        result = expression.split(valueToChange2).join(value2);
        return result;
      }
      if (value3) {
        result = expression.split(valueToChange).join(value1);
        result = expression.split(valueToChange2).join(value2);
        result = expression.split(valueToChange3).join(value3);
        return result;
      } else {
        result = expression.split(valueToChange).join(value1);
        return result;
      }
    }
    // Expression Spliter
    function expressionSpliter(expression) {
      // Split using a space character
      let arr = expression.split(" ");

      // Making the Array
      var array = [];
      for (let index = 0; index < arr.length; index++) {
        array += `${arr[index]} `;
      }
      return array;
    }

    // Q Finder
    function Q_Checker(expression) {
      var q_array = expressionSpliter(expression);
      // var q_result = eval(math.evaluate(q_array));
      var q_result = eval(q_array);
      console.log(q_array);
      console.log(q_result);

      var answers = {
        puttingValues: q_array,
        answer: q_result,
      };
      return answers;
    }

    function checkPED(value) {
      var comment, is_Q, data;
      if (value < 1) {
        comment = `Since the value is less than 1, (${value} < 1), demand is inelastic.`;
        is_Q = `Q is a necessary good`;
        data = {
          comment: comment,
          is_Q: is_Q,
        };
        return data;
      }
      if (value > 1) {
        comment = `Since the value is greater than 1, (${value} > 1), demand is elastic.`;
        is_Q = `Q is a demanding good`;
        data = {
          comment: comment,
          is_Q: is_Q,
        };
        return data;
      } else {
        comment = `Since the value is equal to 1, (${value} = 1), demand is unitary`;
        is_Q = `Demand for Q does not change in response to price.`;
        data = {
          comment: comment,
          is_Q: is_Q,
        };
        return data;
      }
    }

    function checkYED(value) {
      var comment, elasticity, data;
      if (value < 1) {
        comment = `Since the value is less than 1, (${value} < 1). It is a necessary good.`;
        elasticity = `Such that, Income Elasticity is <b>Low Income Elasticity</b> having <b>necessary goods</b> from Normal Goods.`;
        data = {
          comment: comment,
          elasticity: elasticity,
        };
        return data;
      }
      if (value > 1) {
        comment = `Since the value is greater than 1, (${value} > 1). This is typical of a luxury or superior good.`;
        elasticity = `Such that, Income Elasticity is <b>High Income Elasticity</b> having <b>superior goods</b> from Normal Goods.`;
        data = {
          comment: comment,
          elasticity: elasticity,
        };
        return data;
      }
      if (value == 1) {
        comment = `Since the value is equal to 1, (${value} = 1). Proportional increase in price and goods.`;
        elasticity = `Such that, Income Elasticity is <b>Unitary Income Elasticity</b> having no change.`;
        data = {
          comment: comment,
          elasticity: elasticity,
        };
        return data;
      }
      if (value == 0) {
        comment = `Since the value is equal to 0, (${value} = 0). Change in income has no effect over the bought quantity`;
        elasticity = `Such that, Income Elasticity is <b>Zero Income Elasticity</b> having <b>Sticky goods</b> from Normal Goods.`;
        data = {
          comment: comment,
          elasticity: elasticity,
        };
        return data;
      } else {
        comment = `Since the value is less than 0, (${value} > 0), it is an inferior goods, unlike others which are normal goods.`;
        elasticity = `Such that, Income Elasticity is <b>Negative Income Elasticity</b> inferior from Normal Goods.`;
        data = {
          comment: comment,
          elasticity: elasticity,
        };
        return data;
      }
    }

    function calculatePED(derivative, paymentOfGoods1, quantity) {
      // Find PED
      console.log("");
      console.log("####### PED #######");
      var PED_formula = "(d*q / d * p) * p/q";
      console.log(PED_formula);
      console.log(derivative, paymentOfGoods1, quantity);
      var PED_answer = derivative * (paymentOfGoods1 / quantity),
        PED_answer = Math.abs(PED_answer).toPrecision(3);
      console.log(PED_answer);

      var PED_commentary = checkPED(PED_answer);
      console.log(PED_commentary);
      var PED_Data = {
        PED_formula: PED_formula,
        PED_answer: PED_answer,
        PED_commentary: PED_commentary,
      };
      return PED_Data;
    }

    // Price Elasticity of Demand
    function PriceElasticity(
      expression,
      paymentOfGoods1,
      paymentOfGoods2,
      paymentOfGoods3,
      income,
      select_html_Value
    ) {
      // Obtaining the Expression from first Function
      console.log(expression);
      var originalExpression, y_replaced_expression, d_Q_div_d_p, answers; // Creating variables.

      // select_html_Value means the value of select in the select.
      // If Value is 1
      if (select_html_Value == 1) {
        // Formula
        // PED = | E_d | = | (d_Q / d_p) * p/q|

        // For Deviation
        originalExpression = expression;
        y_replaced_expression = variableReplacer(expression, "y", income);

        // For Q
        /p1/.test(expression)
          ? (expression = variableReplacer(expression, "p1", paymentOfGoods1))
          : (expression = variableReplacer(expression, "p", paymentOfGoods1));
        expression = variableReplacer(expression, "y", income);
        console.log(expression);

        // Getting Q
        var qValue = Q_Checker(expression); // Answer of Q
        console.log(qValue);
        console.log("####### Q End #######");
        console.log("");

        // d_Q_div_d_p
        var expression_derivation = variableReplacer(
          y_replaced_expression,
          "p",
          "x"
        );
        console.log("####### d_Q_div_d_p #######");

        console.log(
          "Since value of Price changes, it won't make a change on Y because it will be the exact amount of sum of Price."
        );
        // Adding Value of Y
        console.log(y_replaced_expression);

        // Taking Deviation
        d_Q_div_d_p = deriveExpression(expression_derivation);
        console.log(d_Q_div_d_p);

        // Putting answers in one bracket
        var d_Q_div_d_p_answer = {
          puttingValues: y_replaced_expression,
          answer: parseFloat(d_Q_div_d_p),
        };

        // Find PED
        calculatePED(
          // d_Q_div_d_p_answer.answer * (paymentOfGoods1 / qValue.answer)
          d_Q_div_d_p_answer.answer,
          paymentOfGoods1,
          qValue.answer
        );
      }
      // If Value is 2
      if (select_html_Value == 2) {
        // Finding Q1
        console.log("");
        console.log("##### Finding Q1 #####");
        var p1_replaced = variableReplacer(expression, "p1", paymentOfGoods1),
          p1_p2_replaced = variableReplacer(p1_replaced, "p2", paymentOfGoods2),
          y_p1_p2_replaced = variableReplacer(p1_p2_replaced, "y", income),
          valueOf_Q1 = eval(y_p1_p2_replaced);

        var p2_replaced = variableReplacer(expression, "p2", paymentOfGoods2),
          y_p2_replaced = variableReplacer(p2_replaced, "y", income),
          x_variable = variableReplacer(y_p2_replaced, "p1", "x");

        console.log(y_p1_p2_replaced);
        console.log(valueOf_Q1);

        console.log("");
        console.log("##### Finding Derivation #####");
        // Finding Derivation == (dq1 / dp1 = d/dp1[expression])
        // Keeping p1 varible, other than them, all are constants.
        var derivation = deriveExpression(x_variable);
        console.log("Keeping p1 varible, other than them, all are constants.");
        console.log(y_p2_replaced);
        console.log(derivation);

        // Find PED
        var PED_Data = calculatePED(derivation, paymentOfGoods1, valueOf_Q1);
      }

      // If Value is 3
      if (select_html_Value == 3) {
        expression.replace(/p1/g, paymentOfGoods1);
        expression.replace(/p2/g, paymentOfGoods2);
        expression.replace(/p3/g, paymentOfGoods3);
        expression.replace(/y/g, income);
        console.log(expression);
      }

      console.log("-------------------");
      if (select_html_Value == 1) {
        return (answers = [
          {
            // Q Values
            name: "Q Value",
            q_PuttingValues: qValue.puttingValues,
            qValue: qValue.answer,
          },
          {
            // d_Q_div_d_p
            name: "Deviation",
            deviation_PuttingValues: d_Q_div_d_p_answer.puttingValues,
            deviationAnswer: d_Q_div_d_p_answer.answer,
          },
          {
            // PED
            name: "PED",
            ped_PuttingValues: PED_Data.PED_formula,
            ped_answer: PED_answer,
            PED_commentary: PED_commentary,
          },
        ]);
      }
      if (select_html_Value == 2) {
      }
    }

    function PEDCheck() {
      // Obtaining Expression and Income
      var expression = document
        .getElementById("ped_expression")
        .value.toLowerCase();
      var ped_income = document.getElementById("ped_income").value; // Gets Value of Q

      // Logs The Result
      console.log(expression);
      console.log(ped_income);

      if (select_value == 1) {
        var paymentOfGoods1 = document.getElementById("pg1").value || 0;
      } else if (select_value == 2) {
        var paymentOfGoods1 = document.getElementById("pg1").value || 0;
        var paymentOfGoods2 = document.getElementById("pg2").value || 0;
      } else if (select_value == 3) {
        var paymentOfGoods1 = document.getElementById("pg1").value || 0;
        var paymentOfGoods2 = document.getElementById("pg2").value || 0;
        var paymentOfGoods3 = document.getElementById("pg3").value || 0;
      } else {
        console.log("No value selected, give an error message on display");
      }
      PriceElasticity(
        expression,
        paymentOfGoods1,
        paymentOfGoods2 || 0,
        paymentOfGoods3 || 0,
        ped_income,
        select_value
      );
    }
  </script>
  <!-- YED Calculator -->
  <script>
    //////
    // YED
    //////
    function YEDCalculator(
      expression,
      y,
      q,
      selectPriceValue,
      paymentOfGoods1
    ) {
      var YED = "(d*q / d * p) * y/q";

      if (selectPriceValue == 1) {
        // Derivative
        // Formula = dQ/dY = (d/dy) [expression]
        var newcomment = "Considering Price as constant",
          p_constant = variableReplacer(expression, "p", paymentOfGoods1 || 1),
          q_variable = variableReplacer(p_constant, "y", "x"),
          derivative = deriveExpression(q_variable);

        console.log(YED);
        console.log(newcomment);
        console.log(p_constant);
        console.log(q_variable);
        console.log(derivative);
      } else if (selectPriceValue == 2) {
        // Derivative
        // Formula = dQ/dY = (d/dy) [expression]
        var newcomment = "Considering Prices as constant",
          q_variable = variableReplacer(expression, "y", "x"),
          derivative = deriveExpression(q_variable);

        console.log(YED);
        console.log(newcomment);
        console.log(q_variable);
        console.log(derivative);
        console.log("");
      } else if (selectPriceValue == 3) {
      } else {
        console.log("Please enter a valid number");
      }
      // Formula = (d*q / d*p) * y/q
      console.log("Putting Values of Derivative");
      console.log(YED);
      var putting_values = variableReplacer(YED, "(d*q / d * p)", derivative);
      console.log(putting_values);

      YED = derivative * (y / q);
      YED = YED.toPrecision(2);
      console.log(YED);
      var answer = checkYED(YED);
      console.log(answer);
    }
  </script>
  <!-- XED Calculator -->
  <script>
    /////////////////
    // XED Calculator
    /////////////////
    function XEDCalculator(expression, p2, q1, selectPriceValue) {
      var XED = "(d*q / d * p) * y/q";
      if (selectPriceValue == 1) {
        // Derivative
        // Formula = dQ1/dp2 = (d/dp2) [expression]
        var newcomment = "Considering Price 2 as variable",
          q_variable = variableReplacer(expression, "p2", "x"),
          derivative = deriveExpression(q_variable);

        console.log(XED);
        console.log(newcomment);
        console.log(p_constant);
        console.log(q_variable);
        console.log(derivative);
      } else if (selectPriceValue == 2) {
        // Derivative
        // Formula = dQ1/dp2 = (d/dp2) [expression]
        var newcomment = "Considering Prices as constant",
          q_variable = variableReplacer(expression, "p2", "x"),
          derivative = deriveExpression(q_variable);

        console.log(XED);
        console.log(newcomment);
        console.log(q_variable);
        console.log(derivative);
        console.log("");
      } else if (selectPriceValue == 3) {
      } else {
        console.log("Please enter a valid number");
      }
      // Formula = (d*q / d*p) * y/q
      console.log("Putting Values of Derivative");
      console.log(XED);
      var putting_values = variableReplacer(XED, "(d*q / d * p)", derivative);
      console.log(putting_values);

      XED = derivative * (p2 / q1);
      XED = XED.toPrecision(2);
      console.log(XED);
      var answer = checkYED(XED);
      console.log(answer);
    }
  </script>
  <script>
    function ChangeCalculator(quantity_demand, price, percentChange) {
      var data = (price / quantity_demand) * percentChange;
      console.log(data + "% Change");
      return data;
    }

    ////////
    // Tests
    ////////
    // PED
    // var Expressive = "700-2*p+0.02*y",
    var Expressive = "4850 - 5 * p1 + 1.5 * p2 + 0.1 * y",
      p = "200" || 0,
      p1 = p,
      p2 = "100" || 0,
      p3 = "478" || 0,
      income = "5000",
      // PriceElasticity(Expressive, p1, p2, p3, income);
      expression = Expressive.toLowerCase();
    // console.log(PriceElasticity(expression, p1, p2, p3, income, 2));
    // console.log(PriceElasticity(expression, p1, p2, p3, income, 2));

    // YED
    // var y = 25,
    //   q = 750;
    var y = 10000,
      q = 5000;

    // YEDCalculator("700-2*p+0.02*y", y, q, 1);
    // YEDCalculator(Expressive, y, q, 2);
    // XEDCalculator(expression, p2, q, 2);

    // ChangeCalculator(q, p2, 10);
    // Use css selector:after to say number and use `%` in selector.
  </script>
</html>
