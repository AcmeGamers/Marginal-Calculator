<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marginal Calculator</title>
  </head>
  <body>
    <input
      type="text"
      placeholder="Expression"
      value="49 + 8*x + 6*x^2"
      id="expression"
    />
    <input type="text" placeholder="Value of Q" value="9" id="q_value" />
    <input value="Calculate!" type="button" onclick="inputCheck()" />

    <div>
      <h2 id="derivation_h2"></h2>
      <p id="derivative_step1"></p>
      <p id="derivative_step2"></p>
    </div>
    <div>
      <h2 id="puttingValues_h2"></h2>
      <p id="puttingValues_step1"></p>
      <p id="puttingValues_step2"></p>
    </div>

    <p>Answer: <span id="result"></span></p>
  </body>

  <!-- Nerdamer -->
  <script src="./node_modules/nerdamer/nerdamer.core.js"></script>
  <script src="./node_modules/nerdamer/Algebra.js"></script>
  <script src="./node_modules/nerdamer/Calculus.js"></script>

  <!-- My Scripts -->
  <script src="./altogether.js"></script>

  <!-- Custom Scripts  -->
  <script>
    function inputCheck() {
      console.log("check");
      var expression = document.getElementById("expression").value;
      var q_value = document.getElementById("q_value").value;
      try {
        var result = MarginalRevenue(expression, q_value);

        // Derivation
        document.getElementById("derivation_h2").innerHTML =
          "Step 1: Derivation";
        document.getElementById(
          "derivative_step1"
        ).innerHTML = `d/dx(${expression})`;
        document.getElementById("derivative_step2").innerHTML =
          result.derivative;

        // Putting Values
        document.getElementById("puttingValues_h2").innerHTML =
          "Step 2: Putting Values";

        document.getElementById(
          "puttingValues_step1"
        ).innerHTML = `Value of Q = ${q_value}`;
        document.getElementById("puttingValues_step2").innerHTML =
          result.puttingValues;
        // Results
        document.getElementById("result").innerHTML = result.answer;
      } catch (error) {
        document.getElementById("result").innerHTML =
          "There is some issue in the formula or the typed data is invalid";
        console.log(error);
      }
    }
  </script>
</html>
